export type Locale = 'zh' | 'en';

const zh = {
  'app.badge': 'ProofKit · 证据工作台',
  'home.title': 'ProofKit 证据工作台',
  'home.subtitle': '上传 Word 或文本，ProofKit 即可提炼可核查陈述、调用权威搜索和 AI 核验，几分钟生成可下载的核查报告。',
  'home.stepsTitle': '如何使用 ProofKit',
  'home.stepsSubtitle': '三步完成核查：上传文档、等待 AI 核查、导出 Word 报告。',
  'home.step.upload': '上传材料',
  'home.step.upload.desc': '拖拽 Word 文档或粘贴文本，系统自动同步段落与句子。',
  'home.step.review': '自动核查',
  'home.step.review.desc': 'ProofKit 识别陈述、调用搜索与 AI 判定真伪，持续跟踪进度。',
  'home.step.export': '导出报告',
  'home.step.export.desc': '核查完成后，一键导出 .doc 报告或复制引用，便于交付。',
  'upload.hint': '支持上传 .docx 文档',
  'upload.dragHint': '拖拽 Word 文档到此处，或点击选择',
  'upload.mode.note': '请选择一种方式上传内容：',
  'upload.mode.file': '上传 Word',
  'upload.mode.text': '粘贴文本',
  'upload.placeholder': '或直接粘贴原文...',
  'upload.validation': '请上传 .docx 或输入文本',
  'upload.button.start': '开始核查',
  'upload.button.loading': '解析中...',
  'upload.button.stop': '停止解析',
  'errors.verifyFailed': '部分陈述验证失败，请稍后重试',
  'errors.claimsFailed': '陈述识别失败',
  'errors.parseFailed': '无法解析文档',
  'errors.uploadFailed': '上传或解析失败',
  'errors.exportFailed': '导出失败',
  'errors.stopped': '解析已停止',
  'summary.claims': '陈述：{{count}}',
  'summary.verified': '已判定：{{count}}',
  'summary.supported': '支持：{{count}}',
  'summary.refuted': '驳斥：{{count}}',
  'summary.disputed': '争议：{{count}}',
  'summary.insufficient': '不足：{{count}}',
  'summary.export': '导出报告（.doc）',
  'summary.exporting': '报告生成中...',
  'summary.timer': '核查进行中：已耗时 {{seconds}} 秒',
  'summary.reminder': '请耐心等待，避免频繁操作页面',
  'summary.completedTimer': '本次核查耗时 {{seconds}} 秒',
  'filters.all': '全部',
  'labels.SUPPORTED': '支持',
  'labels.REFUTED': '驳斥',
  'labels.DISPUTED': '存争议',
  'labels.INSUFFICIENT': '证据不足',
  'claims.empty': '暂无可核查陈述',
  'claims.badge.pending': '待验证',
  'claims.evidenceCount': '证据 {{count}} 条',
  'claims.confidenceValue': '置信度 {{value}}',
  'claims.confidencePending': '置信度 采集中',
  'docPreview.empty': '上传文档后，这里会高亮可核查陈述',
  'docPreview.paragraph': '段落 {{index}}',
  'drawer.title': '证据抽屉',
  'drawer.noClaim': '未选中陈述',
  'drawer.close': '关闭',
  'drawer.verdict': '判定',
  'drawer.confidence': '置信度 {{value}}%',
  'drawer.noEvidence': '暂无证据，请稍候...',
  'drawer.authority': '权威度 {{value}}%',
  'sources.web': '网页',
  'sources.wikipedia': '维基百科',
  'sources.wikidata': '维基数据',
  'language.switchLabel': '语言',
  'language.zh': '中文',
  'language.en': 'English'
} as const;

export type TranslationKey = keyof typeof zh;
type TranslationRecord = Record<TranslationKey, string>;

const en: TranslationRecord = {
  'app.badge': 'ProofKit · Evidence Workspace',
  'home.title': 'ProofKit Evidence Workspace',
  'home.subtitle': 'Upload Word docs or text, let ProofKit extract claims, fetch trusted evidence, and export polished reports within minutes.',
  'home.stepsTitle': 'How to use ProofKit',
  'home.stepsSubtitle': 'Three simple steps: upload, wait for AI review, export the Word report.',
  'home.step.upload': 'Upload materials',
  'home.step.upload.desc': 'Drag Word docs or paste text; ProofKit keeps paragraphs and sentences aligned.',
  'home.step.review': 'Automatic verification',
  'home.step.review.desc': 'ProofKit extracts claims, searches trusted sources, and updates the timer while AI verifies.',
  'home.step.export': 'Export report',
  'home.step.export.desc': 'Once finished, export a .doc report or copy citations for delivery.',
  'upload.hint': 'Upload a .docx document',
  'upload.dragHint': 'Drag your Word file here or click to browse',
  'upload.mode.note': 'Choose how you want to submit content:',
  'upload.mode.file': 'Upload Word',
  'upload.mode.text': 'Paste text',
  'upload.placeholder': 'Or paste the original text here...',
  'upload.validation': 'Please upload a .docx file or enter text',
  'upload.button.start': 'Start checking',
  'upload.button.loading': 'Processing...',
  'upload.button.stop': 'Stop',
  'errors.verifyFailed': 'Some claims failed to verify. Please try again later.',
  'errors.claimsFailed': 'Claim extraction failed',
  'errors.parseFailed': 'Unable to parse the document',
  'errors.uploadFailed': 'Upload or parsing failed',
  'errors.exportFailed': 'Export failed',
  'errors.stopped': 'Processing was stopped',
  'summary.claims': 'Claims: {{count}}',
  'summary.verified': 'Verified: {{count}}',
  'summary.supported': 'Supported: {{count}}',
  'summary.refuted': 'Refuted: {{count}}',
  'summary.disputed': 'Disputed: {{count}}',
  'summary.insufficient': 'Insufficient: {{count}}',
  'summary.export': 'Export report (.doc)',
  'summary.exporting': 'Preparing report...',
  'summary.timer': 'Verification in progress: {{seconds}}s elapsed',
  'summary.reminder': 'Please wait patiently and avoid frequent interactions',
  'summary.completedTimer': 'Last verification finished in {{seconds}}s',
  'filters.all': 'All',
  'labels.SUPPORTED': 'Supported',
  'labels.REFUTED': 'Refuted',
  'labels.DISPUTED': 'Disputed',
  'labels.INSUFFICIENT': 'Insufficient',
  'claims.empty': 'No claims to display',
  'claims.badge.pending': 'Pending',
  'claims.evidenceCount': 'Evidence: {{count}}',
  'claims.confidenceValue': 'Confidence {{value}}',
  'claims.confidencePending': 'Confidence pending',
  'docPreview.empty': 'Upload a document to highlight checkable claims here',
  'docPreview.paragraph': 'Paragraph {{index}}',
  'drawer.title': 'Evidence',
  'drawer.noClaim': 'No claim selected',
  'drawer.close': 'Close',
  'drawer.verdict': 'Verdict',
  'drawer.confidence': 'Confidence {{value}}%',
  'drawer.noEvidence': 'No evidence yet. Please wait...',
  'drawer.authority': 'Authority {{value}}%',
  'sources.web': 'Web',
  'sources.wikipedia': 'Wikipedia',
  'sources.wikidata': 'Wikidata',
  'language.switchLabel': 'Language',
  'language.zh': '中文',
  'language.en': 'English'
};

const TRANSLATIONS: Record<Locale, Record<TranslationKey, string>> = {
  zh,
  en
};

export function translate(
  locale: Locale,
  key: TranslationKey,
  vars?: Record<string, string | number>
): string {
  const template = TRANSLATIONS[locale][key] ?? TRANSLATIONS.zh[key] ?? key;
  if (!vars) return template;
  return template.replace(/\{\{(.*?)\}\}/g, (_, raw) => {
    const value = vars[raw.trim()];
    return value === undefined ? '' : String(value);
  });
}
